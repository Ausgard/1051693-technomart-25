var btn=document.querySelector("a.mail");form=document.querySelector(".write-us-form"),close=document.querySelector(".close-popup"),log=document.querySelector("[name=your-name]"),mail=document.querySelector("[name=your-mail]"),text=document.querySelector("[name=comment-field]"),mapBtn=document.querySelector("a.popup-img"),mapPopup=document.querySelector(".popup-map"),mapClose=document.querySelector(".close-popup-map"),buyBtn=document.querySelectorAll(".one-click-buy"),buyPopup=document.querySelector(".popup-cart"),buyClose=document.querySelector(".close-popup-buy"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("log")}catch(e){isStorageSupport=!1}btn&&btn.addEventListener("click",function(e){e.preventDefault(),form.classList.add("show-popup"),storage?(log.value=storage,mail.focus()):log.focus(),storage?(mail.value=storage,text.focus()):mail.focus()}),close&&(close.addEventListener("click",function(e){e.preventDefault(),form.classList.remove("show-popup"),form.classList.remove("error-popup")}),form.addEventListener("submit",function(e){log.value&&mail.value&&text.value?isStorageSupport&&(localStorage.setItem("log",log.value),localStorage.setItem("mail",mail.value),localStorage.setItem("text",text.value)):(e.preventDefault(),form.classList.remove("error-popup"),form.offsetWidth=form.offsetWidth,form.classList.add("error-popup"))})),window.addEventListener("keydown",function(e){27===e.keyCode&&form.classList.contains("show-popup")&&(e.preventDefault(),form.classList.remove("show-popup"),form.classList.remove("error-popup"))}),mapBtn&&(mapBtn.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("show-popup")}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("show-popup")}),window.addEventListener("keydown",function(e){27===e.keyCode&&mapPopup.classList.contains("show-popup")&&(e.preventDefault(),mapPopup.classList.remove("show-popup"))})),[].forEach.call(buyBtn,function(e){e.addEventListener("click",function(e){e.preventDefault(),buyPopup.classList.add("show-popup")})}),buyClose&&(buyClose.addEventListener("click",function(e){e.preventDefault(),buyPopup.classList.remove("show-popup")}),window.addEventListener("keydown",function(e){27===e.keyCode&&buyPopup.classList.contains("show-popup")&&(e.preventDefault(),buyPopup.classList.remove("show-popup"))}));